/* eslint-disable global-require */
let Handle;
let paymentInformation;

beforeEach(() => {
    Handle = require('../Handle');
    jest.clearAllMocks();
    paymentInformation = {
        "isCreditCard": true,
        "cardType": "visa",
        "cardNumber": "************1111",
        "adyenPaymentMethod": "Credit Card",
        "adyenIssuerName": null,
        "stateData": "{\"riskData\":{\"clientData\":\"eyJ2ZXJzaW9uIjoiMS4wLjAiLCJkZXZpY2VGaW5nZXJwcmludCI6InJ5RUdYOGVacEowMDMwMDAwMDAwMDAwMDAwS1piSVFqNmt6czAwODkxNDY3NzZjVkI5NGlLekJHUUdidlBpVnJIcTVTMTZHb2g1TWswMDRpdmJTdVlkRzBSMDAwMDBZVnhFcjAwMDAwY3J1OXNBeFRSNUdVeTJqOGdGR1Q6NDAiLCJwZXJzaXN0ZW50Q29va2llIjpbIl9ycF91aWQ9OWFiZGQwMjAtNzliYy01MzZhLWY4NGUtMzIwODU1NTk3ZTMxIl0sImNvbXBvbmVudHMiOnsidXNlckFnZW50IjoiM2ZhNDU3Y2EzNjczMDc3NzhkZGUxODdhZDYyYmU2YjIiLCJsYW5ndWFnZSI6ImVuLVVTIiwiY29sb3JEZXB0aCI6MjQsImRldmljZU1lbW9yeSI6OCwicGl4ZWxSYXRpbyI6MSwiaGFyZHdhcmVDb25jdXJyZW5jeSI6OCwic2NyZWVuV2lkdGgiOjI1NjAsInNjcmVlbkhlaWdodCI6MTQ0MCwiYXZhaWxhYmxlU2NyZWVuV2lkdGgiOjI1NjAsImF2YWlsYWJsZVNjcmVlbkhlaWdodCI6MTQxNywidGltZXpvbmVPZmZzZXQiOi0xMjAsInRpbWV6b25lIjoiRXVyb3BlL0Ftc3RlcmRhbSIsInNlc3Npb25TdG9yYWdlIjoxLCJsb2NhbFN0b3JhZ2UiOjEsImluZGV4ZWREYiI6MSwiYWRkQmVoYXZpb3IiOjAsIm9wZW5EYXRhYmFzZSI6MSwicGxhdGZvcm0iOiJNYWNJbnRlbCIsInBsdWdpbnMiOiJjMDhlOTc4YWIwMmUzNTk1YmZiOWNiN2ViZWZlZjMzMyIsImNhbnZhcyI6IjU5YzliODQ5ZTc2NjdiMzJmNmUzMzJmMzdjOTM5NDNjIiwid2ViZ2wiOiIwMzNkY2RlZjQ4YmY3NmY5MTMyY2M3MDlkZmY5YTA3MSIsIndlYmdsVmVuZG9yQW5kUmVuZGVyZXIiOiJJbnRlbCBJbmMufkludGVsKFIpIElyaXMoVE0pIFBsdXMgR3JhcGhpY3MgNjU1IiwiYWRCbG9jayI6MCwiaGFzTGllZExhbmd1YWdlcyI6MCwiaGFzTGllZFJlc29sdXRpb24iOjAsImhhc0xpZWRPcyI6MCwiaGFzTGllZEJyb3dzZXIiOjAsImZvbnRzIjoiMjkyZWEyY2NlY2NkMDJiMDFjMGM0YzFkNDEzMjE3NWUiLCJhdWRpbyI6IjQ3M2QxYzc0ZGI3Y2QzOGUxZmExNTgxN2IxMzY2YmZjIiwiZW51bWVyYXRlRGV2aWNlcyI6ImU4MGQ3ZDRjYzE4MzdhNDcwZWY0Y2M2NjEzZjE3MzNiIn19\"},\"paymentMethod\":{\"type\":\"scheme\",\"encryptedCardNumber\":\"adyenjs_0_1_25$akyJEZxU8BgyLnkWb8iecngOD4zcDTqSwl3M6Z7Qat6CrQVQuiSaivi5aGBKQpWPnR+ghmB6CyV6Foq0pBF829v7C3bul51xO7tmqElswhIC/8hOP7PoWLYyOEg+fu16TnbaJn+ebUgUhrlUxh/WekV8PA0zn5aGNccvXrgHycXtbZs49ToMZ7Et0i0OvS2rVVsND6aFaR2hOj+W88qU8rmT2LT5B0l0Xy19gFSWwgCf+1Wjef93HW4zYgoS0ym/6uQ0aofvqb28PK98mzTIdgqw6F3VveKd7LI6LyEVcu2H0xToLFj2+R20XZ1I9NXlCDU4N62TyIz7BLUQDNrQ9g==$EE18KRlIA4FBZptVygrFmOw/WdZIW66EtP03VNCJXYKcAulGQhV34XBfPDwCZK2hk3qeGBQEoWeAdpd7pkKc/GgkRe4kfOOwV8IE4prJtqJ+ITopvihBZ1XO/DRd4GdYPdmbI9VnezElCN/8+VIK+eVjZq/FJqePtuGiXc6cNLjuhem46UYxW+GpjGcnaATVYw3vIKKOfOc/eD/nj/WB8tfxWmVPqL/n5tVLimAdo5fUyM3Rs+IqPVqtaq3La18o0yRasmJRwpSNPzdshdSXsfbSp9K+uP9I0aD6BtgVop8KkfncjhJWvphwBz8vQnod6Q9L2y9SH5RF6vojTC0c161B7C+sSnYminrGxIQ+lOJjXGKbSz8wr0so/RQdkw7/4gh3BTsgfTUVy/1qm8rXG0z4zj/i8wmaqMDSYO+y9DpN+FuCYnGii1s37AkccDWTiA94gqqD5uL+DXdLUyd9RaWha0Y6TGwuCA03Lg+fywkq+1BRRMpRp9yPJunJZPAvZ2sP31GVyXi8a4nIsCpxNkUdpYjKpnlse6fkgW/DT8Jme6ml1YosfxkiPmoQLKePUq4FcTZ4hB2QJDNyWbotXRcKQ44Omo83R8P50DBRX0QGYeWmo8qaBKkxL3h1ztx167p2/2FUNv4kQK0VmYomDAkvFni443zxEZIB3Vqxb/EalK7Ik6sAnkNZDKEUda/AhECa7YCKWHvKKaSp4/m16v35JwtHsOnuLpAyfpit1oMoT1BUElgvUcfariTtrnx+VPda5hI+MjXvbB/63riFZpDzUsRFfyJE2cuW7Q5NKyR0H5CP919pHZaFPCIVoZLWNdfQUuHRUw2/Yd8c15N4Hg8liFxp+VW5jKlWJ3YaF/+FOIYoRxTMHGBh1qr8IIRJDdmmzctrNf4/Hq+3cJFIeoVt7U/WIvE6dm4Dvz52QrLOl79N8oegQzSL/li72WzgCWsNX402v1Lu8w==\",\"encryptedExpiryMonth\":\"adyenjs_0_1_25$Mtd2sclfK7QP+fm+IcaJSaEitOf8rTj6NFYaopJRfVmeCkUZisJKJ9u/r/nCuxrw+D64ubQ1aUI/PbL9T2gjU2tv/y32VuYUEMeKPfvrQag7qmwzQ93kIX9T1pf7oWkr0ue8xsBwcnbqZOO2PMFJrPBmUgdVPqAGmQBnDJicvSAL0616rp5DEK2XV13VPUjR0LLlgNYmqdUCJj2mYnAOsgOGUfAXYSE/esMpIjcjR3ed2ePdaBAwfEIQOPx3I/cV0fZVIyTGQI28WaK+avBC7ImOUwd6l87BB2UfZS9V2C5PzSBVbl8RAc5Yjl78ycNE8E16HQUyXyL6T1SslXdNxg==$E0sXtNF5me4dbXxRz4ski34kqMH6Bm4p8SnglyesuttamIvh8I8LBty62PluIviC2lJ7sTMloZW0j9QUeT01Ykqfb8q0OjvONajACREPOugmVafZ71Y3AjsgQkfudNrfdML1tV7urFfFiAxRtc3XXBZkNGR234eGUWE33MK7lUhjuxFES26MizgCFC3v0y3qbJt3BD3Te4u/o7vlyvJHqUlZmnnLNkvid+xsXuWnNycI/aQd+SWrerIzWB0wID7ljSCg9nn2s+rxPDywIvHlhcUqkpmTiEC/idCXFIro760zugNJrOwTkeo0ZAyYG/uewwWXInFgWGtcFS52nda41v4zKl531VHeCPHsMrI+27Re11FeArzI+FymbpSBmehr/Q5rZZqD90yqklcjcm0j0TzoWDA7Zl3bEPSvVg1Kj8RVA4ML6Lrwlv/n6zPGGtyO2U9K/fuFwBq9jXSUVXvh/VlM8Eb4hTxAhQp14pg4yIbaoUFY9nhh4ojx3GxiX+2VpUoVlvM=\",\"encryptedExpiryYear\":\"adyenjs_0_1_25$YpbKh/q2cLKTSAIbtmeCLTt6DAhXQMzfJ3BEbNcfzMESPgHT3GsWYfk5aICPERX9GDhELOohpu4m+x+MDwm+5yYtKgK0YRxyaELaJ/kI6EYlrscubT67bOy6u2i+Vn6pncxs1QIuAmDoRT8LT8Av5zo5l9hYSx553ZB3QmpYGdsfHOCYzusg+WmWwgDpp6qYaCWg5FiKBDPNo6opZ4dz8wQ98IJy4YHZrdC3ratyCiFaAdrdfAkGxmHAMR1oh9JfmCYae0FCiNJxfPAPJUKreWDFxinCirhlEOtoZTsrYc6Ng97r64EiQuAp99pKcq6MMmDNjO8CTHR0N2uRRc+jSg==$2qbzDXSC6NGr3GWE+bc1z9lbFTHosXrZwqGaY9l8r3lRAaYCIZkvcnpVmGcC8SB3EXQTApuESqb3RmnPfFqstrso6Ic4vVAKJ7BBS0vqWeiYxI44wM0xP1Q9GOQ2F641Xs5bayaCbBuAIUrntbtMrfhyWIV/dpyNNQHzXMNINCQj8S5RY3coptZBk9o/EzXSNbHBhjvdXX/yo1X479g0nKIfAHnyFX2w9MVFiSjWX7/r46OT3RFdNRHz8xxWivgs1+sUmOQxiqDQbY0nPRFEDiwgo+pykPNbmbg86SxAFY2nnKRxPedRv3p2ZIAgGZtf3DsjhdXV+u3Q2LOjBYnlQGvv7dI+zC5OjuyuxdLHy7r1OtOHjwjB6HisSDoTKIqajpvX9LjGMcbk19cIcMvlJ6Agry22N3X69m/0tRLrYeEcYLGHgcWSjSxQJy1sqnRbAJR5hLdDGSCrnQ6I0eQRdkdBj/NhcjFgSATmdCXKP3JkOA4nfvLjJr14i3eWdI/X/KyshbVa\",\"encryptedSecurityCode\":\"adyenjs_0_1_25$Hw07mderBLxRWnps90rlDVLgFlRHGez6gG7OXtAPaoRV7CJ2E2Y0RGml0Vc0eLDrsYeKV6tH5wda6TQ39aMmN9JGMbD3tNAf0v0Hg8Q1n4H3B+Vjgb+vOWPwmOKCBLvzN02IzP+ohPevu+RXi1DOv3Q3r+R4TVWu7jjvD4rNMNZ5qHOIX0PftJbpOH+k9s7uqTWRUWl9cb5se9tb+fU8nBgZcuwauvgevvaVR+ay2rhdbd1/H70xW5rII/Ya5TbZDMNnO0frjHcA2loA1ck5PcQBPfe0azrg+5/4+AuYJvRRtNvcXN3fwvR7C6u/mni4JODPR5jcgUqhRXuopdAeZw==$NNG6qsO5ZpzH5z4oI7H9dXh8KALAo2OMXor5iJ8q3u/suPvAPnv+ukQDvp1NKWnKKkwnDwX1PavhWk/FviQ3KNZgKrNkHr2oeyJGP0dGPkl8og0QRXzwdXPY9Y1rCrPyJIuhTTlc4gMlNrXvCpb1bvKz0Ea7ess/01jsi9iV0sdi6I3E+ndpS6aBFxeGiAgHdTADYii6CIXB5Cyucut2Y637uElEUgMOvjiZ/JkTT0edCMWn0VrGMK3rjBtOfhAU1D9rkkDthLiw5Dit9dbYa4xD8DYDU8FNt3c1AjzOZOr2fU+RLsKiakDZUigStGr5eqR1EeRzcv6gf4HG+phDmM+0PbqDIylvaXjG5rQ0zeoCh+N6lgHlHlaperfsRZsJHw+ky1Qk7+IGExtg1Xm3lZdGyRWuRPDCW9/vw+ZV3fGPtU2uGeJFEHUzkcZ7czDERhr7Vx1DlXR1b3VgValPXf6JPud8pJiWBtNLWxE8U1Eg12r5WDrlH5xGZMqO9w==\"},\"browserInfo\":{\"acceptHeader\":\"*/*\",\"colorDepth\":24,\"language\":\"en-US\",\"javaEnabled\":false,\"screenHeight\":1440,\"screenWidth\":2560,\"userAgent\":\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/84.0.4147.89 Safari/537.36\",\"timeZoneOffset\":-120}}",
        "storedPaymentUUID": null,
        "expirationMonth": {value: "10"},
        "expirationYear": {value: "2020"},
    }
});

afterEach(() => {
    jest.resetModules();
});

describe('adyen component Handle function', () => {
    it('should create payment instrument', () => {
        const BasketMgr = require('dw/order/BasketMgr');
        const currentBasket = BasketMgr.getCurrentBasket();

        Handle(currentBasket, paymentInformation);
        expect(currentBasket.createPaymentInstrument).toBeCalledTimes(1);
    });

    it('should set card details to payment instrument when payment method is credit card', () => {
        const BasketMgr = require('dw/order/BasketMgr');
        const currentBasket = BasketMgr.getCurrentBasket();

        Handle(currentBasket, paymentInformation);
        expect(BasketMgr.setCreditCardNumber).toBeCalledTimes(1);
        expect(BasketMgr.setCreditCardType).toBeCalledTimes(1);
        expect(BasketMgr.setCreditCardExpirationMonth).toBeCalledTimes(1);
        expect(BasketMgr.setCreditCardExpirationYear).toBeCalledTimes(1);
        expect(BasketMgr.setCreditCardToken).toBeCalledTimes(1);
    });

    it.skip('should set issuer name to local payment method when an issuer name exists', () => {
        const BasketMgr = require('dw/order/BasketMgr');
        const currentBasket = BasketMgr.getCurrentBasket();
        paymentInformation = {
            "isCreditCard": false,
            "adyenIssuerName": "ING",
            "stateData": "{\"riskData\":{\"clientData\":\"eyJ2ZXJzaW9uIjoiMS4wLjAiLCJkZXZpY2VGaW5nZXJwcmludCI6InJ5RUdYOGVacEowMDMwMDAwMDAwMDAwMDAwS1piSVFqNmt6czAwODkxNDY3NzZjVkI5NGlLekJHUUdidlBpVnJIcTVTMTZHb2g1TWswMDRpdmJTdVlkRzBSMDAwMDBZVnhFcjAwMDAwY3J1OXNBeFRSNUdVeTJqOGdGR1Q6NDAiLCJwZXJzaXN0ZW50Q29va2llIjpbIl9ycF91aWQ9OWFiZGQwMjAtNzliYy01MzZhLWY4NGUtMzIwODU1NTk3ZTMxIl0sImNvbXBvbmVudHMiOnsidXNlckFnZW50IjoiM2ZhNDU3Y2EzNjczMDc3NzhkZGUxODdhZDYyYmU2YjIiLCJsYW5ndWFnZSI6ImVuLVVTIiwiY29sb3JEZXB0aCI6MjQsImRldmljZU1lbW9yeSI6OCwicGl4ZWxSYXRpbyI6MSwiaGFyZHdhcmVDb25jdXJyZW5jeSI6OCwic2NyZWVuV2lkdGgiOjI1NjAsInNjcmVlbkhlaWdodCI6MTQ0MCwiYXZhaWxhYmxlU2NyZWVuV2lkdGgiOjI1NjAsImF2YWlsYWJsZVNjcmVlbkhlaWdodCI6MTQxNywidGltZXpvbmVPZmZzZXQiOi0xMjAsInRpbWV6b25lIjoiRXVyb3BlL0Ftc3RlcmRhbSIsInNlc3Npb25TdG9yYWdlIjoxLCJsb2NhbFN0b3JhZ2UiOjEsImluZGV4ZWREYiI6MSwiYWRkQmVoYXZpb3IiOjAsIm9wZW5EYXRhYmFzZSI6MSwicGxhdGZvcm0iOiJNYWNJbnRlbCIsInBsdWdpbnMiOiJjMDhlOTc4YWIwMmUzNTk1YmZiOWNiN2ViZWZlZjMzMyIsImNhbnZhcyI6IjU5YzliODQ5ZTc2NjdiMzJmNmUzMzJmMzdjOTM5NDNjIiwid2ViZ2wiOiIwMzNkY2RlZjQ4YmY3NmY5MTMyY2M3MDlkZmY5YTA3MSIsIndlYmdsVmVuZG9yQW5kUmVuZGVyZXIiOiJJbnRlbCBJbmMufkludGVsKFIpIElyaXMoVE0pIFBsdXMgR3JhcGhpY3MgNjU1IiwiYWRCbG9jayI6MCwiaGFzTGllZExhbmd1YWdlcyI6MCwiaGFzTGllZFJlc29sdXRpb24iOjAsImhhc0xpZWRPcyI6MCwiaGFzTGllZEJyb3dzZXIiOjAsImZvbnRzIjoiMjkyZWEyY2NlY2NkMDJiMDFjMGM0YzFkNDEzMjE3NWUiLCJhdWRpbyI6IjQ3M2QxYzc0ZGI3Y2QzOGUxZmExNTgxN2IxMzY2YmZjIiwiZW51bWVyYXRlRGV2aWNlcyI6ImU4MGQ3ZDRjYzE4MzdhNDcwZWY0Y2M2NjEzZjE3MzNiIn19\"},\"paymentMethod\":{\"type\":\"scheme\",\"encryptedCardNumber\":\"adyenjs_0_1_25$akyJEZxU8BgyLnkWb8iecngOD4zcDTqSwl3M6Z7Qat6CrQVQuiSaivi5aGBKQpWPnR+ghmB6CyV6Foq0pBF829v7C3bul51xO7tmqElswhIC/8hOP7PoWLYyOEg+fu16TnbaJn+ebUgUhrlUxh/WekV8PA0zn5aGNccvXrgHycXtbZs49ToMZ7Et0i0OvS2rVVsND6aFaR2hOj+W88qU8rmT2LT5B0l0Xy19gFSWwgCf+1Wjef93HW4zYgoS0ym/6uQ0aofvqb28PK98mzTIdgqw6F3VveKd7LI6LyEVcu2H0xToLFj2+R20XZ1I9NXlCDU4N62TyIz7BLUQDNrQ9g==$EE18KRlIA4FBZptVygrFmOw/WdZIW66EtP03VNCJXYKcAulGQhV34XBfPDwCZK2hk3qeGBQEoWeAdpd7pkKc/GgkRe4kfOOwV8IE4prJtqJ+ITopvihBZ1XO/DRd4GdYPdmbI9VnezElCN/8+VIK+eVjZq/FJqePtuGiXc6cNLjuhem46UYxW+GpjGcnaATVYw3vIKKOfOc/eD/nj/WB8tfxWmVPqL/n5tVLimAdo5fUyM3Rs+IqPVqtaq3La18o0yRasmJRwpSNPzdshdSXsfbSp9K+uP9I0aD6BtgVop8KkfncjhJWvphwBz8vQnod6Q9L2y9SH5RF6vojTC0c161B7C+sSnYminrGxIQ+lOJjXGKbSz8wr0so/RQdkw7/4gh3BTsgfTUVy/1qm8rXG0z4zj/i8wmaqMDSYO+y9DpN+FuCYnGii1s37AkccDWTiA94gqqD5uL+DXdLUyd9RaWha0Y6TGwuCA03Lg+fywkq+1BRRMpRp9yPJunJZPAvZ2sP31GVyXi8a4nIsCpxNkUdpYjKpnlse6fkgW/DT8Jme6ml1YosfxkiPmoQLKePUq4FcTZ4hB2QJDNyWbotXRcKQ44Omo83R8P50DBRX0QGYeWmo8qaBKkxL3h1ztx167p2/2FUNv4kQK0VmYomDAkvFni443zxEZIB3Vqxb/EalK7Ik6sAnkNZDKEUda/AhECa7YCKWHvKKaSp4/m16v35JwtHsOnuLpAyfpit1oMoT1BUElgvUcfariTtrnx+VPda5hI+MjXvbB/63riFZpDzUsRFfyJE2cuW7Q5NKyR0H5CP919pHZaFPCIVoZLWNdfQUuHRUw2/Yd8c15N4Hg8liFxp+VW5jKlWJ3YaF/+FOIYoRxTMHGBh1qr8IIRJDdmmzctrNf4/Hq+3cJFIeoVt7U/WIvE6dm4Dvz52QrLOl79N8oegQzSL/li72WzgCWsNX402v1Lu8w==\",\"encryptedExpiryMonth\":\"adyenjs_0_1_25$Mtd2sclfK7QP+fm+IcaJSaEitOf8rTj6NFYaopJRfVmeCkUZisJKJ9u/r/nCuxrw+D64ubQ1aUI/PbL9T2gjU2tv/y32VuYUEMeKPfvrQag7qmwzQ93kIX9T1pf7oWkr0ue8xsBwcnbqZOO2PMFJrPBmUgdVPqAGmQBnDJicvSAL0616rp5DEK2XV13VPUjR0LLlgNYmqdUCJj2mYnAOsgOGUfAXYSE/esMpIjcjR3ed2ePdaBAwfEIQOPx3I/cV0fZVIyTGQI28WaK+avBC7ImOUwd6l87BB2UfZS9V2C5PzSBVbl8RAc5Yjl78ycNE8E16HQUyXyL6T1SslXdNxg==$E0sXtNF5me4dbXxRz4ski34kqMH6Bm4p8SnglyesuttamIvh8I8LBty62PluIviC2lJ7sTMloZW0j9QUeT01Ykqfb8q0OjvONajACREPOugmVafZ71Y3AjsgQkfudNrfdML1tV7urFfFiAxRtc3XXBZkNGR234eGUWE33MK7lUhjuxFES26MizgCFC3v0y3qbJt3BD3Te4u/o7vlyvJHqUlZmnnLNkvid+xsXuWnNycI/aQd+SWrerIzWB0wID7ljSCg9nn2s+rxPDywIvHlhcUqkpmTiEC/idCXFIro760zugNJrOwTkeo0ZAyYG/uewwWXInFgWGtcFS52nda41v4zKl531VHeCPHsMrI+27Re11FeArzI+FymbpSBmehr/Q5rZZqD90yqklcjcm0j0TzoWDA7Zl3bEPSvVg1Kj8RVA4ML6Lrwlv/n6zPGGtyO2U9K/fuFwBq9jXSUVXvh/VlM8Eb4hTxAhQp14pg4yIbaoUFY9nhh4ojx3GxiX+2VpUoVlvM=\",\"encryptedExpiryYear\":\"adyenjs_0_1_25$YpbKh/q2cLKTSAIbtmeCLTt6DAhXQMzfJ3BEbNcfzMESPgHT3GsWYfk5aICPERX9GDhELOohpu4m+x+MDwm+5yYtKgK0YRxyaELaJ/kI6EYlrscubT67bOy6u2i+Vn6pncxs1QIuAmDoRT8LT8Av5zo5l9hYSx553ZB3QmpYGdsfHOCYzusg+WmWwgDpp6qYaCWg5FiKBDPNo6opZ4dz8wQ98IJy4YHZrdC3ratyCiFaAdrdfAkGxmHAMR1oh9JfmCYae0FCiNJxfPAPJUKreWDFxinCirhlEOtoZTsrYc6Ng97r64EiQuAp99pKcq6MMmDNjO8CTHR0N2uRRc+jSg==$2qbzDXSC6NGr3GWE+bc1z9lbFTHosXrZwqGaY9l8r3lRAaYCIZkvcnpVmGcC8SB3EXQTApuESqb3RmnPfFqstrso6Ic4vVAKJ7BBS0vqWeiYxI44wM0xP1Q9GOQ2F641Xs5bayaCbBuAIUrntbtMrfhyWIV/dpyNNQHzXMNINCQj8S5RY3coptZBk9o/EzXSNbHBhjvdXX/yo1X479g0nKIfAHnyFX2w9MVFiSjWX7/r46OT3RFdNRHz8xxWivgs1+sUmOQxiqDQbY0nPRFEDiwgo+pykPNbmbg86SxAFY2nnKRxPedRv3p2ZIAgGZtf3DsjhdXV+u3Q2LOjBYnlQGvv7dI+zC5OjuyuxdLHy7r1OtOHjwjB6HisSDoTKIqajpvX9LjGMcbk19cIcMvlJ6Agry22N3X69m/0tRLrYeEcYLGHgcWSjSxQJy1sqnRbAJR5hLdDGSCrnQ6I0eQRdkdBj/NhcjFgSATmdCXKP3JkOA4nfvLjJr14i3eWdI/X/KyshbVa\",\"encryptedSecurityCode\":\"adyenjs_0_1_25$Hw07mderBLxRWnps90rlDVLgFlRHGez6gG7OXtAPaoRV7CJ2E2Y0RGml0Vc0eLDrsYeKV6tH5wda6TQ39aMmN9JGMbD3tNAf0v0Hg8Q1n4H3B+Vjgb+vOWPwmOKCBLvzN02IzP+ohPevu+RXi1DOv3Q3r+R4TVWu7jjvD4rNMNZ5qHOIX0PftJbpOH+k9s7uqTWRUWl9cb5se9tb+fU8nBgZcuwauvgevvaVR+ay2rhdbd1/H70xW5rII/Ya5TbZDMNnO0frjHcA2loA1ck5PcQBPfe0azrg+5/4+AuYJvRRtNvcXN3fwvR7C6u/mni4JODPR5jcgUqhRXuopdAeZw==$NNG6qsO5ZpzH5z4oI7H9dXh8KALAo2OMXor5iJ8q3u/suPvAPnv+ukQDvp1NKWnKKkwnDwX1PavhWk/FviQ3KNZgKrNkHr2oeyJGP0dGPkl8og0QRXzwdXPY9Y1rCrPyJIuhTTlc4gMlNrXvCpb1bvKz0Ea7ess/01jsi9iV0sdi6I3E+ndpS6aBFxeGiAgHdTADYii6CIXB5Cyucut2Y637uElEUgMOvjiZ/JkTT0edCMWn0VrGMK3rjBtOfhAU1D9rkkDthLiw5Dit9dbYa4xD8DYDU8FNt3c1AjzOZOr2fU+RLsKiakDZUigStGr5eqR1EeRzcv6gf4HG+phDmM+0PbqDIylvaXjG5rQ0zeoCh+N6lgHlHlaperfsRZsJHw+ky1Qk7+IGExtg1Xm3lZdGyRWuRPDCW9/vw+ZV3fGPtU2uGeJFEHUzkcZ7czDERhr7Vx1DlXR1b3VgValPXf6JPud8pJiWBtNLWxE8U1Eg12r5WDrlH5xGZMqO9w==\"},\"browserInfo\":{\"acceptHeader\":\"*/*\",\"colorDepth\":24,\"language\":\"en-US\",\"javaEnabled\":false,\"screenHeight\":1440,\"screenWidth\":2560,\"userAgent\":\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/84.0.4147.89 Safari/537.36\",\"timeZoneOffset\":-120}}",
        }
        Handle(currentBasket, paymentInformation);
        expect(currentBasket.getPaymentInstruments()[0].custom.adyenIssuerName).toBe("ING");
    });
});